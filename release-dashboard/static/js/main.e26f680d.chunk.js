(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{60:function(e,t,r){e.exports=r(94)},61:function(e,t,r){},63:function(e,t,r){},67:function(e){e.exports={name:"Thunderbird Release Dashboard",version:"v2.1-209-g192fec1",source:"",commit:"192fec10fb515a78cc5dd72c7b78a44d8eb52fd7"}},94:function(e,t,r){"use strict";r.r(t);var n=r(29),c=r(30),a=r(36),s=r(59),o=r(31),u=r(17),i=(r(61),r(2)),l=r.n(i),f=r(97),p=r(98),h=r(99),d=r(100),b=r(101),v=r(102),m=r(103),O=r(108),E=r(104),j=r(105),k=r(106),R=r(107),g=(r(63),r(22)),w=["thunderbird"],x="ADD_CHECK_RESULT",y="REFRESH_CHECK_RESULT",I="ADD_SERVER_ERROR",_="SET_VERSION",S="UPDATE_PRODUCT_VERSIONS",N="UPDATE_RELEASE_INFO",T="UPDATE_POLLBOT_VERSION",U="REQUEST_ONGOING_VERSIONS",D="REQUEST_POLLBOT_VERSION",V="UPDATE_URL",P="REFRESH_STATUS",A="REQUEST_STATUS",L=function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1];return"#pollbot/".concat(r,"/").concat(n)};function C(e,t){return{type:_,product:e,version:t}}var F=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};function H(e,t){return{type:S,product:e,versions:t}}function B(e){return{type:T,version:e}}function Q(e){return{type:N,releaseInfo:e}}function G(e,t){return{type:x,title:e,result:t}}function J(e){return{type:y,title:e}}function K(e,t){return{type:I,title:e,err:t}}function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var X=r(67);var q=function(e){var t=e.match(/^#(\w+)\/(\w+)\/([^/]+)\/?/);if(!t)return null;var r=Object(u.a)(t,4),n=r[1],c=r[2],a=r[3],s=w.find(function(e){return e===c});return s?{service:n,product:s,version:a}:null},z=function(e){Object(a.a)(r,e);var t=M(r);function r(e){var c;return Object(n.a)(this,r),(c=t.call(this,e)).versionFromHash=function(){var e,t,r=q(window.location.hash);r&&c.props.dispatch((e=r.product,t=r.version,{type:A,product:e,version:t}))},c.refreshIntervalId=null,c}return Object(c.a)(r,[{key:"setUpAutoRefresh",value:function(){var e=this;if(this.props.shouldRefresh){if(this.refreshIntervalId)return;this.refreshIntervalId=setInterval(function(){return e.props.dispatch({type:P})},6e4)}else this.stopAutoRefresh()}},{key:"stopAutoRefresh",value:function(){this.refreshIntervalId&&(clearInterval(this.refreshIntervalId),this.refreshIntervalId=null)}},{key:"componentDidMount",value:function(){this.props.dispatch({type:D}),this.props.dispatch({type:U}),"Notification"in window&&"denied"!==Notification.permission&&"granted"!==Notification.permission&&Notification.requestPermission(),window.onhashchange=this.versionFromHash,this.versionFromHash()}},{key:"componentDidUpdate",value:function(){this.setUpAutoRefresh()}},{key:"componentWillUnmount",value:function(){this.stopAutoRefresh()}},{key:"render",value:function(){return i.createElement("div",null,i.createElement($,{errors:this.props.errors}),i.createElement("div",{className:"main"},i.createElement("div",{className:"sidebar"},i.createElement(Y,null)),i.createElement("div",{className:"content"},i.createElement(Z,null))),i.createElement("footer",null,"Thunderbird Release Dashboard version:"," ",i.createElement(re,{versionData:X}),"\xa0--\xa0Pollbot version:"," ",i.createElement(re,{versionData:this.props.pollbotVersion})))}}]),r}(i.Component),W=Object(g.b)(function(e){return{checkResults:e.checkResults,pollbotVersion:e.pollbotVersion,shouldRefresh:e.shouldRefresh,errors:e.errors}},function(e){return{dispatch:e}})(z),Y=Object(g.b)(function(e){return{versions:e.productVersions}})(function(e){var t=e.versions,r=function(e,r){var n=F(r);return t.hasOwnProperty(e)&&t[e][r]?i.createElement(f.a,{tag:"a",href:L([e,r])},"".concat(n,": ").concat(t[e][r])):i.createElement("span",null,n,": ",i.createElement(p.a,{type:"grow",color:"dark"}))};return i.createElement(h.a,null,i.createElement(f.a,{active:!0},"Channels"),r("thunderbird","nightly"),r("thunderbird","beta"),r("thunderbird","release"))});var Z=Object(g.b)(function(e){return{checkResults:e.checkResults,releaseInfo:e.releaseInfo,productVersion:e.version}})(function(e){var t=e.releaseInfo,r=e.checkResults,n=e.productVersion,c=Object(u.a)(n,2),a=c[0],s=c[1];return""===s?i.createElement("p",null,"Learn more about a specific version.",i.createElement("strong",null," Select a version number from the left menu.")):t?t.message?i.createElement($,{errors:[["Pollbot error",t.message]]}):i.createElement(b.a,null,i.createElement(v.a,null,i.createElement(m.a,{md:"10"},i.createElement("h2",null,F(a)," ",s," ")),i.createElement(m.a,{md:"2",style:{float:"right"}},i.createElement(ee,{releaseInfo:t,checkResults:r}))),i.createElement(v.a,null,i.createElement("div",{className:"dashboard"},t.checks.map(function(e){return i.createElement(te,{key:e.title,title:e.title,actionable:e.actionable,checkResult:r[e.title]})})))):i.createElement(p.a,{type:"grow",color:"dark"})});function $(e){var t=e.errors;return t&&0!==t.length?i.createElement("div",{className:"errors"},t.map(function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1];return i.createElement(d.a,{color:"danger"},"Failed getting check result for '"+r+"': "+n)}),i.createElement("br",null)):null}function ee(e){var t=e.releaseInfo,r=e.checkResults;if(!!t.checks.map(function(e){return r[e.title]}).some(function(e){return"undefined"===typeof e}))return i.createElement(p.a,{type:"grow",color:"dark"});var n,c,a=[],s=[];return t.checks.map(function(e){return e.actionable?a.push(r[e.title].status):s.push(r[e.title].status),e}),a.some(function(e){return"exists"!==e})?(n="danger",c="Some checks failed"):(n="success",c="All checks are successful"),i.createElement(d.a,{color:n,message:c},c)}var te=function(e){Object(a.a)(r,e);var t=M(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){var e=this.props,t=e.title,r=e.actionable,n=e.checkResult,c=t,a=function(e,t){return e?"error"===e.status?"danger":"exists"===e.status?"success":t?"warning":"info":"info"}(n,r);return r||(c=i.createElement("div",null,i.createElement(O.a,{placement:"bottom",trigger:"hover"},t))),i.createElement(E.a,{color:a},i.createElement(j.a,null,c),i.createElement(k.a,{style:{backgroundColor:"#fff"}},n?i.createElement(R.a,{href:n.link},n.message):i.createElement(p.a,{type:"grow",color:"dark"})))}}]),r}(i.PureComponent);function re(e){var t=e.versionData;if(!t)return null;var r=t.commit,n=t.source,c=t.version,a=n.replace(/\.git/,""),s="".concat(a,"/commit/").concat(r);return i.createElement("a",{href:s},c)}var ne=W,ce=r(19),ae=r.n(ce),se=r(20),oe=r(35),ue={version:["thunderbird",""],productVersions:{thunderbird:{}},releaseInfo:null,checkResults:{},pollbotVersion:null,shouldRefresh:!1,errors:[]};function ie(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case x:return Object.assign({},r,{checkResults:Object.assign({},r.checkResults,Object(oe.a)({},n.title,n.result)),shouldRefresh:"exists"!==n.result.status||r.shouldRefresh});case y:return delete(t=Object.assign({},r.checkResults))[n.title],Object.assign({},r,{checkResults:t});case I:return(e=r.errors.slice()).push([n.title,n.err]),Object.assign({},r,{errors:e,shouldRefresh:!0});case _:return Object.assign({},r,{version:[n.product,n.version],checkResults:{},shouldRefresh:!1,errors:[]});case S:return Object.assign({},r,{productVersions:Object.assign({},r.productVersions,Object(oe.a)({},n.product,n.versions))});case N:return Object.assign({},r,{releaseInfo:n.releaseInfo});case T:return Object.assign({},r,{pollbotVersion:n.version});default:return r}}var le=r(58),fe=r(56),pe=r(57),he=r(8),de=r.n(he),be=r(5),ve=r(25);function me(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(ve.a)(de.a.mark(function e(t){var r;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ge,"/").concat(t,"/ongoing-versions"));case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(e,t){return je.apply(this,arguments)}function je(){return(je=Object(ve.a)(de.a.mark(function e(t,r){var n;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ge,"/").concat(t,"/").concat(r));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(ve.a)(de.a.mark(function e(t){var r;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return we.apply(this,arguments)}function we(){return(we=Object(ve.a)(de.a.mark(function e(){var t;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ge,"/__version__"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xe=de.a.mark(Ve),ye=de.a.mark(Pe),Ie=de.a.mark(Ae),_e=de.a.mark(Le),Se=de.a.mark(Ce),Ne=de.a.mark(Fe),Te=de.a.mark(He),Ue=de.a.mark(Be),De=de.a.mark(Qe);function Ve(){var e;return de.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(be.b)(ge);case 3:return e=t.sent,t.next=6,Object(be.c)(B(e));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Failed getting the pollbot version",t.t0);case 11:case"end":return t.stop()}},xe,null,[[0,8]])}function Pe(e){var t;return de.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(be.b)(me,e);case 3:return t=r.sent,r.next=6,Object(be.c)(H(e,t));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Failed getting the latest channel versions for product: "+e,r.t0);case 11:case"end":return r.stop()}},ye,null,[[0,8]])}function Ae(){return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.a)(w.map(function(e){return Object(be.b)(Pe,e)}));case 2:case"end":return e.stop()}},Ie)}function Le(){var e;return de.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(be.d)();case 2:e=t.sent,window.location.hash=L(e.version);case 4:case"end":return t.stop()}},_e)}function Ce(e,t,r){var n,c,a;return de.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=function(e,t){"granted"===Notification.permission&&new Notification("".concat(e,": status changed (").concat(t,")."))},s.next=3,Object(be.c)(J(e));case 3:return s.next=5,Object(be.b)(He,e,t);case 5:return s.next=7,Object(be.d)();case 7:c=s.sent,a=c.checkResults&&c.checkResults[e],r&&a&&r.status!==a.status&&n(e,a.status);case 10:case"end":return s.stop()}},Se)}function Fe(){var e,t;return de.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(be.d)();case 2:if(e=r.sent,t=e.checkResults,!e.releaseInfo||!e.releaseInfo.checks){r.next=7;break}return r.next=7,Object(be.a)(e.releaseInfo.checks.filter(function(t){var r=t.title;return"exists"!==e.checkResults[r].status}).map(function(e){var r=e.url,n=e.title;return Object(be.b)(Ce,n,r,t[n])}));case 7:case"end":return r.stop()}},Ne)}function He(e,t){var r;return de.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(be.b)(ke,t);case 3:return r=n.sent,n.next=6,Object(be.c)(G(e,r));case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(0),console.error("Failed getting ".concat(e," check result"),n.t0),n.next=13,Object(be.c)(K(e,n.t0));case 13:case"end":return n.stop()}},Te,null,[[0,8]])}function Be(e){var t,r,n,c,a,s,o;return de.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.product,r=e.version,u.next=3,Object(be.d)();case 3:if(n=u.sent,c=n.productVersions,u.prev=5,0!==Object.keys(c).length&&c.hasOwnProperty(t)&&0!==Object.keys(c[t]).length){u.next=16;break}return u.next=9,Object(be.b)(me,t);case 9:return a=u.sent,u.next=12,Object(be.c)(H(t,a));case 12:return u.next=14,Object(be.d)();case 14:s=u.sent,c=s.productVersions;case 16:return c[t].hasOwnProperty(r)&&(r=c[t][r]),u.next=19,Object(be.c)(C(t,r));case 19:return u.next=21,Object(be.b)(Le);case 21:return u.next=23,Object(be.b)(Ee,t,r);case 23:return o=u.sent,u.next=26,Object(be.c)(Q(o));case 26:return u.next=28,Object(be.a)(o.checks.map(function(e){var t=e.url,r=e.title;return Object(be.b)(He,r,t)}));case 28:u.next=33;break;case 30:u.prev=30,u.t0=u.catch(5),console.error("Failed getting the release info for ".concat(t," ").concat(r),u.t0);case 33:case"end":return u.stop()}},Ue,null,[[5,30]])}function Qe(){return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.a)([Object(be.e)(U,Ae),Object(be.e)(D,Ve),Object(be.e)(V,Le),Object(be.e)(P,Fe),Object(be.e)(A,Be)]);case 2:case"end":return e.stop()}},De)}r.d(t,"pollbotUrl",function(){return Ge});var Ge=new URLSearchParams(window.location.search).get("server")||"https://pollbot.services.mozilla.com/v1",Je=document&&document.getElementById("root");Je&&ae.a.render(l.a.createElement(g.a,{store:function(){var e=Object(pe.createLogger)(),t=Object(le.a)(),r=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||se.c,n=Object(se.d)(ie,r(Object(se.a)(t,fe.a,e)));return t.run(Qe),n}()},l.a.createElement(ne,null)),Je)}},[[60,1,2]]]);
//# sourceMappingURL=main.e26f680d.chunk.js.map